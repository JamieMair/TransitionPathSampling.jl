<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Guide · TransitionPathSampling.jl</title><script data-outdated-warner src="../../assets/warner.js"></script><link rel="canonical" href="https://JamieMair.github.io/TransitionPathSampling.jl/manual/guide/"/><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.039/juliamono-regular.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.11/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="../.."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../../assets/documenter.js"></script><script src="../../siteinfo.js"></script><script src="../../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href="../../">TransitionPathSampling.jl</a></span></div><form class="docs-search" action="../../search/"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li><a class="tocitem" href="../../">Home</a></li><li><span class="tocitem">Manual</span><ul><li class="is-active"><a class="tocitem" href>Guide</a><ul class="internal"><li><a class="tocitem" href="#Getting-started"><span>Getting started</span></a></li></ul></li><li><a class="tocitem" href="../examples/">Examples</a></li><li><a class="tocitem" href="../dynamics/">Dynamics</a></li></ul></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">Manual</a></li><li class="is-active"><a href>Guide</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Guide</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/JamieMair/TransitionPathSampling.jl/blob/master/docs/src/manual/guide.md#" title="Edit on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h1 id="Package-Guide"><a class="docs-heading-anchor" href="#Package-Guide">Package Guide</a><a id="Package-Guide-1"></a><a class="docs-heading-anchor-permalink" href="#Package-Guide" title="Permalink"></a></h1><p>This package is designed to help quickly implement Transition Path Sampling (TPS) on user defined problems, providing a set of useful dynamics and utilities to help speed up research.</p><p>Briefly, <a href="https://en.wikipedia.org/wiki/Transition_path_sampling">TPS</a> is a method to sample rare trajectories. If you have some dynamics that produces a trajectory, e.g. a discrete-time random walk, but want to observe some rare behaviour, and want to sample trajectories that are atypical, TPS provides a computationally efficient way of doing this, while still providing the correct statistics. TPS can be thought of as a type of <a href="https://en.wikipedia.org/wiki/Metropolis%E2%80%93Hastings_algorithm">Metropolis-Hastings algorithm</a>.</p><h2 id="Getting-started"><a class="docs-heading-anchor" href="#Getting-started">Getting started</a><a id="Getting-started-1"></a><a class="docs-heading-anchor-permalink" href="#Getting-started" title="Permalink"></a></h2><p>Let&#39;s imagine generating independent discrete-time continuous-space random walk trajectories, which form a trajectory of independent parameters. This dynamics does not produce interesting trajectories, so instead, we can bias towards some observable of the parameters. If we have a trajectory <span>$\omega$</span>, sampled with some probability given by <span>$p(\omega)$</span>, then we can define some interesting rare-event distribution <span>$p&#39;(\omega)$</span> which is biased towards an observable, <span>$\mathcal{O}$</span>, via</p><p class="math-container">\[p&#39;(\omega) = \frac{p(\omega) e^{-s\mathcal{O}(\omega)}}{\mathcal{Z}}, \]</p><p>where <span>$\mathcal{Z}$</span> is the partition sum of the new distribution, which acts to normalise <span>$p&#39;(\omega)$</span>. We can define the observable as the following:</p><pre><code class="language-julia hljs">using TransitionPathSampling
obs_norm(state::AbstractArray) = sum(abs2, state) # Single state in the trajectory
obs_norm(states::AbstractArray{T}) where {T&lt;:AbstractArray} = sum(obs_norm, states) # Trajectory of states
# Wrap the function in a SimpleObservable type
observable = TransitionPathSampling.SimpleObservable(obs_norm)</code></pre><p>We can define the initial trajectory as all zeros, and create a problem with this initial trajectory and the observable.</p><pre><code class="language-julia hljs">trajectory_length = 8
num_parameters = 2
trajectory = [zeros(Float64, num_parameters) for _ in 1:trajectory_length] # Array of states
problem = TransitionPathSampling.DiscreteTrajectory.DTProblem(observable, trajectory)</code></pre><p>Now we can choose an algorithm which provides our underlying dynamics:</p><pre><code class="language-julia hljs">using TransitionPathSampling.MetropolisHastings

s = 1.0 # Bias parameter
sigma = 0.1 # s.t.d of dynamics
chance_to_shoot = 2 / trajectory_length # Probability to shoot (vs probability to bridge)
max_width = 1 # Only change one state at a time
algorithm = gaussian_trajectory_algorithm(s, sigma; chance_to_shoot, max_width)</code></pre><p>This algorithm will perform shooting (i.e. running the dynamics forwards or backwards in time from a fixed point in the trajectory, regenerating part of the trajectory) with a probability of <span>$\frac{2}{8}$</span>, and only edit a single state on each update. We also provide a way of producing Brownian bridges between two fixed points so that states in the middle of the trajectory can be efficiently updated as well. More information on the exact dynamics can be found in <a href="https://arxiv.org/abs/2209.11116">this</a> paper.</p><p>Now we have everything we need to run the dynamics:</p><pre><code class="language-julia hljs">epochs = 100 # Number of samples to make
solution = solve(problem, algorithm, epochs)</code></pre><p>We can access the final state of the solution:</p><pre><code class="language-julia hljs">final_state = get_current_state(solution)</code></pre><p>or, get the observations along the way:</p><pre><code class="language-julia hljs">observable_values = get_observations(solution)</code></pre><p>This highlights the basic interface to the package, but it can be extended to use your own dynamics, which will be covered in the next section.</p></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../../">« Home</a><a class="docs-footer-nextpage" href="../examples/">Examples »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 0.27.7 on <span class="colophon-date" title="Tuesday 21 March 2023 10:24">Tuesday 21 March 2023</span>. Using Julia version 1.8.5.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
